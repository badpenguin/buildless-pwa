var hasClassList="classList"in document.createElement("p");hasClassList||console.error("[polyfill] Elelemmt.classList",navigator.userAgent);Element.prototype.matches||(console.warn("[polyfill] Element.matches"),Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);Array.prototype.forEach||(console.warn("[polyfill] Array.forEach"),Array.prototype.forEach=function(a,c){c=c||window;for(var b=0;b<this.length;b++)a.call(c,this[b],b,this)});
Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(a,c){if(null==this)throw new TypeError('"this" is null or not defined');var b=Object(this),d=b.length>>>0;if(0===d)return!1;for(var e,g,f=0|c,f=Math.max(0<=f?f:d-Math.abs(f),0);f<d;){if((e=b[f])===(g=a)||"number"==typeof e&&"number"==typeof g&&isNaN(e)&&isNaN(g))return!0;f++}return!1}});Array.isArray||(console.warn("[polyfill] Array.isArray"),Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});
window.NodeList&&!NodeList.prototype.forEach&&(console.warn("[polyfill] NodeList.forEach"),NodeList.prototype.forEach=Array.prototype.forEach);"HTMLCollection"in window&&!HTMLCollection.prototype.forEach&&(HTMLCollection.prototype.forEach=Array.prototype.forEach);
Object.assign||(console.warn("[polyfill] Object.assign"),Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(a,c){if(void 0===a||null===a)throw new TypeError("Cannot convert first argument to object");for(var b=Object(a),d=1;d<arguments.length;d++){var e=arguments[d];if(!(void 0===e||null===e))for(var e=Object(e),g=Object.keys(Object(e)),f=0,m=g.length;f<m;f++){var l=g[f],h=Object.getOwnPropertyDescriptor(e,l);void 0!==h&&h.enumerable&&(b[l]=e[l])}}return b}}));var $one=document.querySelector.bind(document),$id=document.getElementById.bind(document),$all=document.querySelectorAll.bind(document);function $find(a,c){return a.querySelectorAll(c)}NodeList.prototype.first=function(){return this.item(0)};var $forEach=function(a,c,b){for(var d=0;d<a.length;d++)c.call(b,a[d],d)},$allEach=function(a,c){var b=$all(a);if(!b)return console.warn("$allEach selector not found"),!1;b.forEach(c)};
function $onReady(a){"loading"!==document.readyState?a():document.addEventListener("DOMContentLoaded",a)}function $onLoad(a){"complete"===document.readyState?a():window.addEventListener("load",a)}
function $triggerEvent(a,c){var b;if(null===a)b=window.document;else if(a instanceof HTMLElement)b=a;else if("string"===typeof a||a instanceof String)b=$one(a);else if(a instanceof Document)b=a;else return console.error("$triggerEvent invalid element",a,c),!1;var d=new Event(c,{bubbles:!0,cancelable:!0});b.dispatchEvent(d)}
function $on(a,c,b){null===a?document.addEventListener(c,function(d){b(d,a)},!1):a instanceof HTMLElement?a.addEventListener(c,function(d){b(d,a)},!1):$allEach(a,function(a){a.addEventListener(c,function(e){b(e,a)},!1)})}function $live(a,c,b){document.addEventListener(c,function(d){d.target.matches(a)&&b(d)},!1)}
function $onSwipe(a,c,b){null===a&&(a=window.document);if(!a)return console.error("$onSwipe invalid element"),!1;var d=0,e=0,g=0,f=0;b||(b=50);a.addEventListener("touchstart",function(b){d=b.changedTouches[0].screenX;e=b.changedTouches[0].screenY},{passive:!0});a.addEventListener("touchend",function(a){g=a.changedTouches[0].screenX;f=a.changedTouches[0].screenY;var l=g-d,h=f-e;if(Math.abs(l)>Math.abs(h)){if(Math.abs(l)>b)return 0>l?c("left",a):c("right",a)}else if(Math.abs(h)>b)return 0<h?c("down",
a):c("up",a)});return!0}function $addClass(a,c){return a?(a.classList.add(c),!0):!1}function $removeClass(a,c){return a?(a.classList.remove(c),!0):!1}function $hasClass(a,c){return a?a.classList.contains(c):!1}function $toggleClass(a,c){return a?(a.classList.toggle(c),!0):!1}function $hide(a){return a?(a.style.display="none",!0):!1}function $show(a,c){return a?(a.style.display=c?c:"",!0):!1}function $empty(a){if(a)for(;a.firstChild;)a.removeChild(a.firstChild)}
function $addOption(a,c,b){var d=document.createElement("option");d.appendChild(document.createTextNode(b));d.value=c;a.appendChild(d)}function $prependHead(a){document.head.insertAdjacentHTML("afterbegin",a)}function $appendBody(a){document.body.insertAdjacentHTML("beforeend",a)}
function $addScript(a,c,b,d){c="undefined"!==typeof c?c:!1;b="undefined"!==typeof b?b:!1;d="undefined"!==typeof d?d:null;var e=document.createElement("script");e.type="text/javascript";e.async=c;e.defer=b;e.src=a;d&&(e.addEventListener("load",function(){d(!0)}),e.addEventListener("error",function(){d(!1)}));document.body.appendChild(e)}Array.prototype.unique=function(){return this.filter(function(a,c,b){return b.indexOf(a)===c})};
function getObject(a,c){return c.split(".").reduce(function(b,a){return"undefined"==typeof b||null===b?b:b[a]},a)}function isObject(a){return null!=a&&"object"==typeof a}function isFunction(a){return a&&("function"==typeof a||"[object Function]"==={}.toString.call(a))};var $ajax=function(a,c,b,d){var e=new XMLHttpRequest;e.open(a,c,!0);isObject(b)||(console.warn("$ajax: options is not an object"),b={});b.timeout&&(console.warn("setting timeout"),e.timeout=b.timeout);b.withCredentials&&(e.withCredentials=b.withCredentials);a=b.data||null;var g=b.debug||!1,f=b.responseType||!1;if(b.sendUrlencoded){e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");c=[];for(var m in a)a.hasOwnProperty(m)&&c.push(encodeURIComponent(m)+"="+encodeURIComponent(a[m]));
a=c.join("&").replace(/%20/g,"+")}else b.sendFormData?e.setRequestHeader("Content-Type","multipart/form-data"):(e.setRequestHeader("Content-Type","application/json; charset=UTF-8"),a=JSON.stringify(a),f||(f="json"));b.nocors||e.setRequestHeader("X-Requested-With","XMLHttpRequest");if(b.headers)for(var l in b.headers)b.headers.hasOwnProperty(l)&&e.setRequestHeader(l,b.headers[l]);b.onprogress&&(getObject(e,"upload.onprogress")?e.upload.onprogress=function(a){var d=Math.round(100*(a.loaded/a.total));
b.onprogress(d,a)}:console.warn("$ajax.js: no upload hook available"));f&&(e.responseType=f);e.onreadystatechange=function(){g&&console.debug("[$ajax] onreadystatechange",e.readyState,e.status,e.statusText)};e.onload=function(){g&&console.log("[$ajax] onload",e.status,e.statusText);var b=200<=e.status&&300>e.status,a={status:e.status,response:e.response,responseType:e.responseType};if("json"===f&&"string"===typeof e.response)try{a.response=JSON.parse(e.response),a.responseType="json"}catch(c){console.error("[$ajax] error parsing JSON response:",
c);d(!1,e,null);return}var n=null;a.hasOwnProperty("response")&&(a.response&&a.response.hasOwnProperty("error")&&a.response.hasOwnProperty("payload"))&&(n=0===a.response.error?a.response.payload:!1);d(b,a,n)};e.onabort=function(){console.warn("[$ajax] onabort",e.status,e.statusText);d(!1,e,null)};e.onerror=function(){console.error("[$ajax] onerror",e.status,e.statusText);d(!1,e,null)};e.ontimeout=function(){console.error("[$ajax] ontimeout",e.status,e.statusText);d(!1,e,null)};b.data?e.send(a):e.send();
return e};function getCookie(a){return(a=document.cookie.match("(^|;) ?"+a+"=([^;]*)(;|$)"))?a[2]:null}function getQuery(a,c){for(var b=window.location.search.substring(1).split("&"),d=0;d<b.length;d++){var e=b[d].split("=");if(decodeURIComponent(e[0])===a)return decodeURIComponent(e[1])}return c}
function setCookie(a,c,b,d,e,g){d="undefined"!==typeof d?";domain="+d:"";e="undefined"!==typeof e?";path="+e:";path=/";g="undefined"!==typeof g&&g?";secure":"";b="undefined"!==typeof b?b:7300;var f=new Date;f.setTime(f.getTime()+864E5*b);document.cookie=a+"="+c+d+e+g+";expires="+f.toUTCString()}function setSessionCookie(a,c,b,d,e){document.cookie=a+"="+c+("undefined"!=typeof b?";domain="+b:"")+("undefined"!=typeof d?";path="+d:";path=/")+("undefined"!=typeof e&&e?";secure":"")}
function removeCookie(a,c,b){c="undefined"!=typeof c?";domain="+c:"";b="undefined"!=typeof b?";path="+b:";path=/";var d=new Date;d.setTime(d.getTime()+-1);document.cookie=a+"=''"+c+b+";expires="+d.toUTCString()};function $copyright(a,c){var b={};b.title=a||"This material is copyright by the author - All Right Reserved";b.notify=function(){console.warn(b.title);isFunction(c)&&c(b.title)};window.document.addEventListener("contextmenu",function(a){a.preventDefault();b.notify();return!1},!1);window.document.addEventListener("copy",function(a){a.preventDefault();a.clipboardData.setData("text/plain",b.title);b.notify();return!1},!1);window.document.addEventListener("dragstart",function(a){a.preventDefault();b.notify();
return!1},!1)};var $dialog=function(){function a(a){a=a||{};var f=a.title||"",h=a.className||"",l=a.disableDismiss||!1,m=Array.isArray(a.buttons)?a.buttons:[],p=a.content||"",r=a.spinner||"",k=a.disableClose||!1;g=a.promiseCallback||null;u=!!a.allowScroll;b=$id(c);if(!b){d=document.createElement("div");$addClass(d,"dialog-window__inner");e=document.createElement("button");$addClass(e,"dialog-window__close");e.innerHTML="&times;";a=document.createElement("div");$addClass(a,"dialog-window");a.appendChild(e);a.appendChild(d);
b=document.createElement("div");b.setAttribute("id",c);$addClass(b,"dialog-backdrop");b.appendChild(a);document.body.appendChild(b);var s=this;e.addEventListener("click",function(b){b.preventDefault();b.stopPropagation();s.hide()});b.addEventListener("click",function(b){b.target===b.currentTarget&&(b.preventDefault(),l||s.hide())})}b.className="dialog-backdrop";h&&$addClass(b,h);e.style.display=k?"none":"block";$empty(d);f&&(h=document.createElement("div"),$addClass(h,"dialog-window__title"),h.innerHTML=
f,d.appendChild(h));p&&(f=document.createElement("div"),$addClass(f,"dialog-window__content"),f.innerHTML=p,d.appendChild(f));r&&(p=document.createElement("div"),$addClass(p,"dialog-window__spinner"),$addClass(p,r),d.appendChild(p));if(0<m.length){r=document.createElement("div");$addClass(r,"dialog-window__buttons");d.appendChild(r);for(p=0;p<m.length;p++)k=m[p],$isString(k)&&(k={label:k}),f=k.label||"OK",h=k.className||(0===p?"btn--primary btn--large":"btn--secondary"),k=k.value||k.label,a=document.createElement("button"),
a.className="btn "+h,a.innerHTML=f,a.onclick=this.hide.bind(this,k),r.appendChild(a)}b.offsetWidth=b.offsetWidth;this.show()}var c="vanilla-dialog",b=null,d=null,e=null,g=null,f=!1,m=0,l="",h="",s="",u=!1;a.prototype.hide=function(a){f?(f=!1,u||(document.body.style.position=l,document.body.style.width=h,window.scrollTo(0,m),document.documentElement.style.scrollBehavior=s),$removeClass(b,"open"),$empty(d),g&&isFunction(g)&&g(a)):console.warn("$dialog: already closed")};a.prototype.show=function(){f?
console.warn("$dialog: already open"):(f=!0,$addClass(b,"open"),u||(m=$windowScrollTop(),l=document.body.style.position,h=document.body.style.width,s=document.documentElement.style["scroll-behavior"],document.body.style.position="fixed",document.body.style.top="-"+m+"px",document.body.style.width="100%",document.documentElement.style.scrollBehavior="auto"))};a.prototype.then=function(b){g=b;return this};a.prototype.getStatus=function(){return!!f};return a}();
function $backDrop(a,c){var b={content:a,spinner:"spinner2",disableDismiss:!0,disableClose:!0,className:"dialog-backdrop--loader"};"undefined"!=typeof b&&Object.assign(b,c);return new $dialog(b)}function $alert(a,c,b){return new $dialog({title:a,content:c,buttons:[b||"OK"],className:"dialog-backdrop--error"})}function $info(a,c,b){return new $dialog({title:a,content:c,buttons:[b||"OK"],className:"dialog-backdrop--info"})};var $form=function(){var a,c,b,d,e,g,f,m,l;function h(b,a){F&&("undefined"!==typeof a?console.debug(b,a):console.debug(b))}function s(b){b.forEach(function(b){h("! disable",b.name||b.id||b.className||b.type);b.setAttribute("disabled","disabled")})}function u(b){b.forEach(function(b){h("enable",b);b.removeAttribute("disabled")})}function n(A,q){if(!this)throw'$form: You forgot to use "new" to create the object';if(!A)throw"$form: You did not provide any element";k=$one(A);if(!k)throw"$form: element not found for: "+
A;q=q||{};a=q.action||!1;c=q.validClass||"is-valid";b=q.validClass||"is-invalid";d=q.dirtyClass||"is-dirty";e=q.pristineClass||"is-pristine";g=q.fieldParentSelector||"div";f=q.disableSubmit||!1;B=q.onFormValidate||null;m=q.alertSubmit||!1;l=q.errorMessageClass||"error-message";var E=q.debounceTime||300;C=$debounce(this.validate.bind(this),E,!1);D=$debounce(this.validateField.bind(this),E,!1);k.setAttribute("novalidate","");f&&(v=k.querySelectorAll("input[type=submit]"),s(v));x=k.querySelectorAll("input[type=reset],input[type=button]");
s(x);var G=this;k.querySelectorAll('input:not([type="submit"]):not([type="reset"]),textarea,select').forEach(function(b){h("! initialize",b.name||b.id);b.isDirty=!1;$on(b,"blur",function(b){h("! ON blur",b.target.name||b.target.id);C()});$on(b,"input",function(a){h("! ON input",a.target.name||a.target.id);p=b.isDirty=!0;D(a.target.name||a.target.id)})});k.addEventListener("submit",function(b){h("! on submit");b.preventDefault();G.validate()?a&&k.setAttribute("action",a):(w&&$scrollIntoView(w),m&&
$alert("ATTENZIONE",m))})}var F=!1,t={},y={},z={},p=!1,r=!1,k=null,C=null,D=null,B=null,x=null,v=null;l=m=f=g=e=d=b=c=a=void 0;var w=null;n.prototype.addValidator=function(b,a){t.hasOwnProperty(b)||(t[b]=[]);t[b].push(a);h("- addValidator =",t);return this};n.prototype.validate=function(){h("! validate()...");var b=this._checkForm();this._reportForm(b);return r};n.prototype._checkForm=function(){var b=!0;w=null;for(var a in t){var d=this.checkField(a);!0!==d&&(b=!1);this.reportField(a,d)}B&&(h("-- calling onFormValidate..."),
b=B(k,b));h("-- _checkForm =",b);return b};n.prototype.checkField=function(b){h("- checkField()...",b);if(!t.hasOwnProperty(b))return console.warn("$form::checkField, does not exists: ",b),!0;for(var a=t[b],d=0;d<a.length;d++){var e=a[d],c=this.getFieldValue(b),e=e(c);if(!0!==e)return h("-- check failed terminating",e),e}return!0};n.prototype.getFieldObject=function(b){if(y.hasOwnProperty(b))return y[b];var a=k.querySelector('[name="'+b+'"],[id="'+b+'"]');return y[b]=a};n.prototype.getFieldErrorMessageObject=
function(b,a){if(z.hasOwnProperty(b))return z[b];if(a){var d=document.createElement("div");$addClasses(d,l);z[b]=d;a.appendChild(d);return d}return null};n.prototype.getFieldValue=function(b){var a=this.getFieldObject(b);if("radio"===a.type)return b=k.querySelector('[name="'+b+'"]:checked,[id="'+b+'"]:checked'),!b?null:b.value;if("checkbox"===a.type){b=k.querySelectorAll('[name="'+b+'"]:checked,[id="'+b+'"]:checked');if(0===b.length)return null;for(var a=[],d=0;d<b.length;d++)a.push(b[d].value);return a}return a.value};
n.prototype.reportField=function(a,f){var h=this.getFieldObject(a);if(h){var k=$closest(h,g);if(!0===f){$removeClass(k,b);$addClass(k,c);h.isValid=!0;var l=this.getFieldErrorMessageObject(a,null);l&&(l.innerHTML="")}else{$addClass(k,b);$removeClass(k,c);h.isValid=!1;if(l=this.getFieldErrorMessageObject(a,k))l.innerHTML=f;null===w&&(w=h)}h.hasOwnProperty("isDirty")&&(h.isDirty?($addClass(k,d),$removeClass(k,e)):($addClass(k,e),$removeClass(k,d)))}else console.warn("$form::reportField, cannot find element for:",
a)};n.prototype._reportForm=function(a){!0===a?(r=!0,$removeClass(k,b),$addClass(k,c),v&&u(v)):(r=!1,v&&s(v),$addClass(k,b),$removeClass(k,c));p&&x&&(u(x),x=null)};n.prototype.getFirstWrongElement=function(){return w};n.prototype.validateField=function(b){var a=this.checkField(b);this.reportField(b,a);return a};return n}();function $addClasses(a,c){if(a){for(var b=c.split(" "),d=0;d<b.length;d++)a.classList.add(b[d]);return!0}return!1}var $closest=function(a,c){if(window.Element&&Element.prototype.closest)return a.closest(c);for(var b=a;b&&b!==document;b=b.parentNode)if(b.matches(c))return b;return null};function $debounce(a,c,b){b="undefined"!==typeof b?b:!1;c=c||20;var d=null;return function(){var e=this,g=arguments,f=b&&!d;clearTimeout(d);d=setTimeout(function(){d=null;b||a.apply(e,g)},c);f&&a.apply(e,g)}}
function $scrollIntoView(a,c){if(!a)return!1;c=c||100;if("scrollBehavior"in document.documentElement.style){try{a.scrollIntoView({block:"center"})}catch(b){console.warn("scrollIntoView failed",b),a.scrollIntoView(!1)}return!0}if(window.hasOwnProperty("scroll")){var d=a.getBoundingClientRect(),e=document.body,g=document.documentElement,f=$windowScrollTop(),d=d.top+f-(g.clientTop||e.clientTop||0);d>=c&&(d-=c);window.scrollTo(0,d);return!0}console.warn("vanillaScroll cannot scroll");return!1}
function $formValues(a){for(var c={},b=0;b<a.elements.length;b++){var d=a.elements[b];d.name&&(("checkbox"===d.type||"radio"===d.type)&&!d.checked?c.hasOwnProperty(d.name)||(c[d.name]=null):c[d.name]=d.value)}return c}function $isString(a){return"string"===typeof a||a instanceof String}
function $formFieldRequired(a){if($isString(a)){if(0<a.trim().length)return!0}else if(Array.isArray(a)){if(0<a.length)return!0}else if(null!==a)throw"$formRequired: got a strange input: "+typeof a;return"Il campo \u00e8 obbligatorio"}function $formFieldLength(a,c,b){if(!$isString(b))return"Tipo di dato non valido";b=b.trim().length;return b<a?"La lunghezza minima \u00e8 di "+a+" caratteri.":b>c?"La lunghezza massimma \u00e8 di "+a+" caratteri.":!0}
function $formFieldEmail(a){return!$isString(a)?"Tipo di dato non valido":/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(a).toLowerCase())?!0:"Email non valida"}function $formDecorateFieldAsNumeric(a,c){var b=$one(a);b.setAttribute("inputmode","decimal");$formFieldAttachKeypressNumericalHandler(b,c||"[0-9.+-]")}
function $formDecorateFieldAsPhone(a,c){var b=$one(a);$formFieldAttachKeypressNumericalHandler(b,c||"[0-9.+-]")}function $formFieldAttachKeypressNumericalHandler(a,c){var b=RegExp(c);$on(a,"keypress",function(a){if("paste"===a.type)e=(event.clipboardData||window.clipboardData).getData("text/plain");else var e=a.keyCode||a.which,e=String.fromCharCode(e);b.test(e)||(a.returnValue=!1,a.preventDefault&&a.preventDefault())})};function $disableScreenScrolling(){document.body.style.touchAction="none";$addClass(document.body,"bp-disable-scroll")}function $restoreScreenScrolling(){document.body.style.touchAction="";$removeClass(document.body,"bp-disable-scroll")}var lightboxInstanceCount=0;
function $lightbox(a,c){var b={initialized:!1,modalId:null,modal:null,modalImage1:null,modalImage2:null,modalCaption:null,modalNext:null,modalPrev:null,images:[],currentIndex:0,singleMode:!1,isOpen:!1,insertCss:function(){$one("#lightbox-inline-css")||$prependHead('<style id="lightbox-inline-css">.lightbox-modal{position:fixed;top:0;left:0;width:100%;height:100%;background:#000;z-index:101;pointer-events:none;opacity:0;transform:scale(0);transition:opacity .4s ease-in-out, transform .3s ease-in-out;}.lightbox-modal.lightbox-modal--open{pointer-events:auto;display:block;opacity:1;transform:scale(1);}.lightbox-modal img{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100vh;object-fit:contain;opacity:0;transition:all .4s ease-in-out}.lightbox-close{position:absolute;top:10px;right:10px;font-size:3rem;cursor:pointer;}.lightbox-next,.lightbox-prev{position:absolute;top:calc(50% - 50px);font-size:6rem;line-height:100px;cursor:pointer;}.lightbox-modal.lightbox-modal--single-mode .lightbox-next,.lightbox-modal.lightbox-modal--single-mode .lightbox-prev{display:none}.lightbox-next{right:10px;}.lightbox-prev{left:10px;}</style>')},
insertModal:function(){lightboxInstanceCount++;b.modalId="lightbox-modal-"+lightboxInstanceCount;$appendBody('<div id="'+b.modalId+'" class="lightbox-modal">\n<figure><img alt=""><img alt=""><figcaption/></figure>\n<div class="lightbox-close">&times;</div>\n<div class="lightbox-next">&rsaquo;</div>\n<div class="lightbox-prev">&lsaquo;</div>\n</div>')},checkModal:function(){b.insertModal();b.modal=$one("#"+b.modalId);var a=$find(b.modal,"img");b.modalImage1=a[0];b.modalImage2=a[1];b.modalCaption=$find(b.modal,
"figcaption").first();a=$find(b.modal,".lightbox-close").first();b.modalNext=$find(b.modal,".lightbox-next").first();b.modalPrev=$find(b.modal,".lightbox-prev").first();$onSwipe(b.modal,function(a){b.isOpen&&("left"===a?b.next():"right"===a?b.prev():b.hide())});window.addEventListener("keydown",function(a){if(b.isOpen){var d=a.key;"ArrowRight"===d?(a.preventDefault(),a.stopImmediatePropagation(),b.next()):"ArrowLeft"===d?(a.preventDefault(),a.stopImmediatePropagation(),b.prev()):"Escape"===d?(a.preventDefault(),
a.stopImmediatePropagation(),b.hide()):" "===d?(a.preventDefault(),a.stopImmediatePropagation(),b.next()):"s"===d&&!0===a.ctrlKey&&(a.preventDefault(),a.stopImmediatePropagation(),b.next())}});a.addEventListener("click",function(a){a.preventDefault();a.stopImmediatePropagation();b.hide()});b.modalImage1.addEventListener("click",function(a){a.preventDefault();a.stopImmediatePropagation();b.next()});b.modalImage2.addEventListener("click",function(a){a.preventDefault();a.stopImmediatePropagation();b.next()});
b.modalImage1.addEventListener("load",function(){b.modalImage1.style.opacity="1";b.modalImage2.style.opacity="0"});b.modalImage2.addEventListener("load",function(){b.modalImage2.style.opacity="1";b.modalImage1.style.opacity="0"});b.modalNext.addEventListener("click",function(a){a.preventDefault();a.stopImmediatePropagation();b.next()});b.modalPrev.addEventListener("click",function(a){a.preventDefault();a.stopImmediatePropagation();b.prev()})},scanElement:function(a){var e=a.getAttribute("data-src")||
a.getAttribute("href")||a.getAttribute("src");if(e){var c=a.getAttribute("data-title")||a.getAttribute("title")||a.getAttribute("alt");if(!c){var f=$find(a,"img").first();f&&(c=f.getAttribute("data-title")||f.getAttribute("title")||f.getAttribute("alt"));if(!c)if(f=$find(a,"figcaption").first())c=f.innerText;else if((f=a.nextSibling)&&f.matches("figcaption"))c=f.innerText}b.images.push([e,c])}else console.warn("$lightbox: element has no valid image url",a)},checkImages:function(){$all(a).forEach(function(a){c?
$find(a,c).forEach(function(a){b.scanElement(a)}):b.scanElement(a)});1===b.images.length&&(b.singleMode=!0,$addClass(b.modal,"lightbox-modal--single-mode"))},bootstrap:function(){b.initialized||(b.checkModal(),b.checkImages(),b.initialized=!0)},switchImage:function(a){b.currentIndex=a;var e,c;0===b.currentIndex%2?(e=b.modalImage1,c=b.modalImage2):(e=b.modalImage2,c=b.modalImage1);c.setAttribute("title","");b.modalCaption.innerText="";e.src=b.images[a][0];if(a=b.images[a][1])e.setAttribute("title",
a),b.modalCaption.innerText=a},show:function(a){b.hide();b.switchImage(a);b.isOpen=!0;$disableScreenScrolling();setTimeout(function(){$addClass(b.modal,"lightbox-modal--open")},0);b.preloadImages()},preloadImages:function(){b.images.map(function(b){return b[0]}).unique().slice(1).forEach(function(b){(new Image).src=b})},hide:function(){b.isOpen=!1;$removeClass(b.modal,"lightbox-modal--open");$restoreScreenScrolling();b.modalImage1.style.opacity="0";b.modalImage2.style.opacity="0"},next:function(){if(!b.singleMode){var a=
b.currentIndex+1;if(a<b.images.length)return b.switchImage(a)}b.hide()},prev:function(){if(!b.singleMode){var a=b.currentIndex-1;if(0<=a)return b.switchImage(a)}b.hide()},detectUrl:function(a){a=a.getAttribute("data-src")||a.getAttribute("href")||a.getAttribute("src");for(var c=0;c<b.images.length;c++)if(b.images[c][0]===a)return c;return!1}};b.insertCss();$on(a,"click",function(d){b.bootstrap();if(0===b.images.length)console.warn("$lightbox: no images found");else{for(var c=d.target,g=b.detectUrl(c);!1===
g;){if(c.matches(a)){console.warn("$lightbox: clicked element url not found in main selector");return}c=c.parentNode;if("function"!==typeof c.getAttribute){console.error("$lightbox: cannot find the clicked element in document");return}g=b.detectUrl(c)}d.preventDefault();d.stopImmediatePropagation();return b.show(g)}});return{}};function $scrollDetector(a){function c(a){d!==a&&(d=a,$triggerEvent(window.document,"scroll-"+a))}var b=$windowScrollTop(),d="";a=a?a:100;document.addEventListener("scroll",function(){var d=$windowScrollTop();if(Math.abs(d-b)>a){var g=d>b?"down":"up";b=d;return c(g)}if(0===d)return b=d,c("top");g=void 0!==document.height?document.height:document.body.offsetHeight;if($windowScrollTop()+$windowHeight()+a>g)return b=d,c("bottom")})}
function $windowWidth(){return window.innerWidth||document.documentElement.clientWidth}
function $scrollOnVisible(a,c){var b=$one(a);b instanceof HTMLElement||console.error("dom_element must be a valid HTMLElement");"function"!==typeof c&&console.error("Second parameter must be a function, got",typeof c,"instead");var d=function(){var a=!1;return function(){var d;if(d=!a)d=b.getBoundingClientRect(),d=0<=d.top&&0<=d.left&&d.bottom<=$windowHeight()&&d.right<=$windowWidth();d&&(a=!0,c())}}();window.addEventListener("scroll",d,!1)}
function $scrollOnPageLenght(a,c){function b(){var a=document;return Math.max(a.body.scrollHeight,a.documentElement.scrollHeight,a.body.offsetHeight,a.documentElement.offsetHeight,a.body.clientHeight,a.documentElement.clientHeight)}"number"!==typeof a&&console.error("First parameter must be a number, got",typeof a,"instead");"function"!==typeof c&&console.error("Second parameter must be a function, got",typeof c,"instead");var d=b()>$windowHeight()?b()-$windowHeight():0;window.addEventListener("resize",
function(){d=b()>$windowHeight()?b()-$windowHeight():0},!1);var e=function(){var b=!1;return function(){var e;if(e=!b)e=0===d?100:100*($windowScrollTop()/d),e=e>a;e&&(b=!0,c())}}();0===b()||100*($windowHeight()/b())>=a?c():window.addEventListener("scroll",e,!1)};function $inViewport(a,c){var b=a.getBoundingClientRect();return 0<=b.top&&b.top+c<=$windowHeight()||0>=b.top&&0<=b.bottom}function $windowScrollTop(){return window.pageYOffset||window.scrollY||document.body.scrollTop||document.documentElement.scrollTop}function $windowHeight(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}
function $visibility(a,c,b){var d={};d.options=Object.assign({invisibleClass:"invisible",visibleClass:"animate--start",easing:null},c);d.refreshList=function(){var a=d.options.easing?d.options.easing:0.05*$windowHeight();d.nodeList.forEach(function(c){$inViewport(c,a)?c.hasAttribute("data-visible")||(c.setAttribute("data-visible",!0),d.options.invisibleClass&&$removeClass(c,d.options.invisibleClass),d.options.visibleClass&&$addClass(c,d.options.visibleClass),b&&b(c,!0)):c.hasAttribute("data-visible")&&
(c.removeAttribute("data-visible"),d.options.visibleClass&&$removeClass(c,d.options.visibleClass),d.options.invisibleClass&&$addClass(c,d.options.invisibleClass),b&&b(c,!1))})};d.nodeList=Array.prototype.slice.call($all(a));d.refreshList();0<d.nodeList.length?document.addEventListener("scroll",d.refreshList):console.warn("$visibility: no hidden elements");return{}};
